x = "Time", y = "Number of participants",
fill = "Legend Title") +
theme_minimal() +
theme(axis.line = element_line(size = 0.5),
plot.title = element_text(hjust = 0.5, face = "bold")) +
geom_vline(xintercept = 9, linetype = "dashed", color = "#940914")  # Add  vertical dashed line
cvalue$ADAS13 <- calculate_cvalue(ADAS13)
long_dat$ADAS13_cut <- ifelse(long_dat$ADAS13 > cvalue$ADAS13, 1, 0)
# Fit the Kaplan-Meier estimator
surv_fit <- long_dat %>%
filter(as.integer(VISCODE) <= 9) %>%
survfit(Surv(as.integer(VISCODE), ADAS13_cut) ~ thirtile_res, data = .)
# Create the Kaplan-Meier survival plot
plot(surv_fit,
main = "Kaplan-Meier Survival Curve",
xlab = "Time",
ylab = "Survival Probability",
col = c("#021636", "#bbceed", "#0a77f5"),
lwd = 2,
xlim = c(0, 10))
legend("bottomleft",
legend = c("Underachiever", "Average", "Overachiever"),
col = c("#021636", "#bbceed", "#0a77f5"),
lwd = 2)
axis(1, lwd = 1)  # Change x-axis thickness
axis(2, lwd = 1)  # Change y-axis thickness
# Log Rank Test
logrank_test$ADAS13 <- long_dat %>%
filter(thirtile_res != 2) %>%
survdiff(Surv(as.integer(VISCODE), ADAS13_cut) ~ thirtile_res, data = .)
logrank_test$ADAS13
# Histogram depicting the number of people measured at each time point by group by outcome
ggplot(long_dat %>% filter(!is.na(ADAS13_cut)),
aes(x = as.integer(VISCODE), fill = factor(ADAS13_cut))) +
geom_histogram(position = "identity", alpha = 0.6, binwidth = 2) +
scale_fill_manual(values = c("#bbceed", "#021636"), labels = c("Normal Cognition", "Impaired Cognition")) +
facet_wrap(~ thirtile_res, ncol = 3,
labeller = labeller(thirtile_res = c("1" = "Underperformed",
"2" = "Average",
"3" = "Overperformed"))) +
labs(title = "Number of observations by time by group by outcome",
x = "Time", y = "Number of participants",
fill = "Legend Title") +
theme_minimal() +
theme(axis.line = element_line(size = 0.5),
plot.title = element_text(hjust = 0.5, face = "bold")) +
geom_vline(xintercept = 9, linetype = "dashed", color = "#940914")  # Add  vertical dashed line
cvalue$ADASQ4 <- calculate_cvalue(ADASQ4)
long_dat$ADASQ4_cut <- ifelse(long_dat$ADASQ4 > cvalue$ADASQ4, 1, 0)
# Fit the Kaplan-Meier estimator
surv_fit <- long_dat %>%
filter(as.integer(VISCODE) <= 9) %>%
survfit(Surv(as.integer(VISCODE), ADASQ4_cut) ~ thirtile_res, data = .)
# Create the Kaplan-Meier survival plot
plot(surv_fit,
main = "Kaplan-Meier Survival Curve",
xlab = "Time",
ylab = "Survival Probability",
col = c("#021636", "#bbceed", "#0a77f5"),
lwd = 2,
xlim = c(0, 10))
legend("bottomleft",
legend = c("Underachiever", "Average", "Overachiever"),
col = c("#021636", "#bbceed", "#0a77f5"),
lwd = 2)
axis(1, lwd = 1)  # Change x-axis thickness
axis(2, lwd = 1)  # Change y-axis thickness
# Log Rank Test
logrank_test$ADASQ4 <- long_dat %>%
filter(thirtile_res != 2) %>%
survdiff(Surv(as.integer(VISCODE), ADASQ4_cut) ~ thirtile_res, data = .)
logrank_test$ADASQ4
# Histogram depicting the number of people measured at each time point by group by outcome
ggplot(long_dat %>% filter(!is.na(ADASQ4_cut)),
aes(x = as.integer(VISCODE), fill = factor(ADASQ4_cut))) +
geom_histogram(position = "identity", alpha = 0.6, binwidth = 2) +
scale_fill_manual(values = c("#bbceed", "#021636"), labels = c("Normal Cognition", "Impaired Cognition")) +
facet_wrap(~ thirtile_res, ncol = 3,
labeller = labeller(thirtile_res = c("1" = "Underperformed",
"2" = "Average",
"3" = "Overperformed"))) +
labs(title = "Number of observations by time by group by outcome",
x = "Time", y = "Number of participants",
fill = "Legend Title") +
theme_minimal() +
theme(axis.line = element_line(size = 0.5),
plot.title = element_text(hjust = 0.5, face = "bold")) +
geom_vline(xintercept = 9, linetype = "dashed", color = "#940914")  # Add  vertical dashed line
cvalue$CDRSB <- calculate_cvalue(CDRSB)
long_dat$CDRSB_cut <- ifelse(long_dat$CDRSB > cvalue$CDRSB, 1, 0)
# Fit the Kaplan-Meier estimator
surv_fit <- long_dat %>%
filter(as.integer(VISCODE) <= 9) %>%
survfit(Surv(as.integer(VISCODE), CDRSB_cut) ~ thirtile_res, data = .)
# Create the Kaplan-Meier survival plot
plot(surv_fit,
main = "Kaplan-Meier Survival Curve",
xlab = "Time",
ylab = "Survival Probability",
col = c("#021636", "#bbceed", "#0a77f5"),
lwd = 2,
xlim = c(0, 10))
legend("bottomleft",
legend = c("Underachiever", "Average", "Overachiever"),
col = c("#021636", "#bbceed", "#0a77f5"),
lwd = 2)
axis(1, lwd = 1)  # Change x-axis thickness
axis(2, lwd = 1)  # Change y-axis thickness
# Log Rank Test
logrank_test$CDRSB <- long_dat %>%
filter(thirtile_res != 2) %>%
survdiff(Surv(as.integer(VISCODE), CDRSB_cut) ~ thirtile_res, data = .)
logrank_test$CDRSB
# Histogram depicting the number of people measured at each time point by group by outcome
ggplot(long_dat %>% filter(!is.na(CDRSB_cut)),
aes(x = as.integer(VISCODE), fill = factor(CDRSB_cut))) +
geom_histogram(position = "identity", alpha = 0.6, binwidth = 2) +
scale_fill_manual(values = c("#bbceed", "#021636"), labels = c("Normal Cognition", "Impaired Cognition")) +
facet_wrap(~ thirtile_res, ncol = 3,
labeller = labeller(thirtile_res = c("1" = "Underperformed",
"2" = "Average",
"3" = "Overperformed"))) +
labs(title = "Number of observations by time by group by outcome",
x = "Time", y = "Number of participants",
fill = "Legend Title") +
theme_minimal() +
theme(axis.line = element_line(size = 0.5),
plot.title = element_text(hjust = 0.5, face = "bold")) +
geom_vline(xintercept = 9, linetype = "dashed", color = "#940914")  # Add  vertical dashed line
cvalue$DIGITSCOR <- wide_dat %>%
filter(DX_0 == "CN") %>%
summarize(
value := mean(DIGITSCOR_0, na.rm = TRUE) - 2 * sd(DIGITSCOR_0, na.rm = TRUE)
) %>%
pull(value)
long_dat$DIGITSCOR_cut <- ifelse(long_dat$DIGITSCOR < cvalue$DIGITSCOR, 1, 0)
# Fit the Kaplan-Meier estimator
surv_fit <- long_dat %>%
filter(as.integer(VISCODE) <= 9) %>%
survfit(Surv(as.integer(VISCODE), DIGITSCOR_cut) ~ thirtile_res, data = .)
# Create the Kaplan-Meier survival plot
plot(surv_fit,
main = "Kaplan-Meier Survival Curve",
xlab = "Time",
ylab = "Survival Probability",
col = c("#021636", "#bbceed", "#0a77f5"),
lwd = 2,
xlim = c(0, 10))
legend("bottomleft",
legend = c("Underachiever", "Average", "Overachiever"),
col = c("#021636", "#bbceed", "#0a77f5"),
lwd = 2)
axis(1, lwd = 1)  # Change x-axis thickness
axis(2, lwd = 1)  # Change y-axis thickness
# Log Rank Test
logrank_test$DIGITSCOR <- long_dat %>%
filter(thirtile_res != 2) %>%
survdiff(Surv(as.integer(VISCODE), DIGITSCOR_cut) ~ thirtile_res, data = .)
logrank_test$DIGITSCOR
# Histogram depicting the number of people measured at each time point by group by outcome
ggplot(long_dat %>% filter(!is.na(DIGITSCOR_cut)),
aes(x = as.integer(VISCODE), fill = factor(DIGITSCOR_cut))) +
geom_histogram(position = "identity", alpha = 0.6, binwidth = 2) +
scale_fill_manual(values = c("#bbceed", "#021636"), labels = c("Normal Cognition", "Impaired Cognition")) +
facet_wrap(~ thirtile_res, ncol = 3,
labeller = labeller(thirtile_res = c("1" = "Underperformed",
"2" = "Average",
"3" = "Overperformed"))) +
labs(title = "Number of observations by time by group by outcome",
x = "Time", y = "Number of participants",
fill = "Legend Title") +
theme_minimal() +
theme(axis.line = element_line(size = 0.5),
plot.title = element_text(hjust = 0.5, face = "bold")) +
geom_vline(xintercept = 9, linetype = "dashed", color = "#940914")  # Add  vertical dashed line
cvalue$FAQ <- 5
long_dat$FAQ_cut <- ifelse(long_dat$FAQ > cvalue$FAQ, 1, 0)
# Fit the Kaplan-Meier estimator
surv_fit <- long_dat %>%
filter(as.integer(VISCODE) <= 9) %>%
survfit(Surv(as.integer(VISCODE), FAQ_cut) ~ thirtile_res, data = .)
# Create the Kaplan-Meier survival plot
plot(surv_fit,
main = "Kaplan-Meier Survival Curve",
xlab = "Time",
ylab = "Survival Probability",
col = c("#021636", "#bbceed", "#0a77f5"),
lwd = 2,
xlim = c(0, 10))
legend("bottomleft",
legend = c("Underachiever", "Average", "Overachiever"),
col = c("#021636", "#bbceed", "#0a77f5"),
lwd = 2)
axis(1, lwd = 1)  # Change x-axis thickness
axis(2, lwd = 1)  # Change y-axis thickness
# Log Rank Test
logrank_test$FAQ <- long_dat %>%
filter(thirtile_res != 2) %>%
survdiff(Surv(as.integer(VISCODE), FAQ_cut) ~ thirtile_res, data = .)
logrank_test$FAQ
# Histogram depicting the number of people measured at each time point by group by outcome
ggplot(long_dat %>% filter(!is.na(FAQ_cut)),
aes(x = as.integer(VISCODE), fill = factor(FAQ_cut))) +
geom_histogram(position = "identity", alpha = 0.6, binwidth = 2) +
scale_fill_manual(values = c("#bbceed", "#021636"), labels = c("Normal Cognition", "Impaired Cognition")) +
facet_wrap(~ thirtile_res, ncol = 3,
labeller = labeller(thirtile_res = c("1" = "Underperformed",
"2" = "Average",
"3" = "Overperformed"))) +
labs(title = "Number of observations by time by group by outcome",
x = "Time", y = "Number of participants",
fill = "Legend Title") +
theme_minimal() +
theme(axis.line = element_line(size = 0.5),
plot.title = element_text(hjust = 0.5, face = "bold")) +
geom_vline(xintercept = 9, linetype = "dashed", color = "#940914")  # Add  vertical dashed line
cvalue$LDELTOTAL <- wide_dat %>%
filter(DX_0 == "CN") %>%
summarize(
value := mean(LDELTOTAL_0, na.rm = TRUE) - 2 * sd(LDELTOTAL_0, na.rm = TRUE)
) %>%
pull(value)
long_dat$LDELTOTAL_cut <- ifelse(long_dat$LDELTOTAL < cvalue$LDELTOTAL, 1, 0)
# Fit the Kaplan-Meier estimator
surv_fit <- long_dat %>%
filter(as.integer(VISCODE) <= 9) %>%
survfit(Surv(as.integer(VISCODE), LDELTOTAL_cut) ~ thirtile_res, data = .)
# Create the Kaplan-Meier survival plot
plot(surv_fit,
main = "Kaplan-Meier Survival Curve",
xlab = "Time",
ylab = "Survival Probability",
col = c("#021636", "#bbceed", "#0a77f5"),
lwd = 2,
xlim = c(0, 10))
legend("bottomleft",
legend = c("Underachiever", "Average", "Overachiever"),
col = c("#021636", "#bbceed", "#0a77f5"),
lwd = 2)
axis(1, lwd = 1)  # Change x-axis thickness
axis(2, lwd = 1)  # Change y-axis thickness
# Log Rank Test
logrank_test$LDELTOTAL <- long_dat %>%
filter(thirtile_res != 2) %>%
survdiff(Surv(as.integer(VISCODE), LDELTOTAL_cut) ~ thirtile_res, data = .)
logrank_test$LDELTOTAL
# Histogram depicting the number of people measured at each time point by group by outcome
ggplot(long_dat %>% filter(!is.na(LDELTOTAL_cut)),
aes(x = as.integer(VISCODE), fill = factor(LDELTOTAL_cut))) +
geom_histogram(position = "identity", alpha = 0.6, binwidth = 2) +
scale_fill_manual(values = c("#bbceed", "#021636"), labels = c("Normal Cognition", "Impaired Cognition")) +
facet_wrap(~ thirtile_res, ncol = 3,
labeller = labeller(thirtile_res = c("1" = "Underperformed",
"2" = "Average",
"3" = "Overperformed"))) +
labs(title = "Number of observations by time by group by outcome",
x = "Time", y = "Number of participants",
fill = "Legend Title") +
theme_minimal() +
theme(axis.line = element_line(size = 0.5),
plot.title = element_text(hjust = 0.5, face = "bold")) +
geom_vline(xintercept = 9, linetype = "dashed", color = "#940914")  # Add  vertical dashed line
long_dat$MOCA_cut <- ifelse(long_dat$MOCA < 26, 1, 0)
# Fit the Kaplan-Meier estimator
surv_fit <- long_dat %>%
filter(as.integer(VISCODE) <= 9) %>%
survfit(Surv(as.integer(VISCODE), MOCA_cut) ~ thirtile_res, data = .)
# Create the Kaplan-Meier survival plot
plot(surv_fit,
main = "Kaplan-Meier Survival Curve",
xlab = "Time",
ylab = "Survival Probability",
col = c("#021636", "#bbceed", "#0a77f5"),
lwd = 2,
xlim = c(0, 10))
legend("bottomleft",
legend = c("Underachiever", "Average", "Overachiever"),
col = c("#021636", "#bbceed", "#0a77f5"),
lwd = 2)
axis(1, lwd = 1)  # Change x-axis thickness
axis(2, lwd = 1)  # Change y-axis thickness
# Log Rank Test
logrank_test$MOCA <- long_dat %>%
filter(thirtile_res != 2) %>%
survdiff(Surv(as.integer(VISCODE), MOCA_cut) ~ thirtile_res, data = .)
logrank_test$MOCA
# Histogram depicting the number of people measured at each time point by group by outcome
ggplot(long_dat %>% filter(!is.na(MOCA_cut)),
aes(x = as.integer(VISCODE), fill = factor(MOCA_cut))) +
geom_histogram(position = "identity", alpha = 0.6, binwidth = 2) +
scale_fill_manual(values = c("#bbceed", "#021636"), labels = c("Normal Cognition", "Impaired Cognition")) +
facet_wrap(~ thirtile_res, ncol = 3,
labeller = labeller(thirtile_res = c("1" = "Underperformed",
"2" = "Average",
"3" = "Overperformed"))) +
labs(title = "Number of observations by time by group by outcome",
x = "Time", y = "Number of participants",
fill = "Legend Title") +
theme_minimal() +
theme(axis.line = element_line(size = 0.5),
plot.title = element_text(hjust = 0.5, face = "bold")) +
geom_vline(xintercept = 9, linetype = "dashed", color = "#940914")  # Add  vertical dashed line
cvalue$RAVLT_immediate <- wide_dat %>%
filter(DX_0 == "CN") %>%
summarize(
value := mean(RAVLT_immediate_0, na.rm = TRUE) - 2 * sd(RAVLT_immediate_0, na.rm = TRUE)
) %>%
pull(value)
long_dat$RAVLT_immediate_cut <- ifelse(long_dat$RAVLT_immediate > cvalue$RAVLT_immediate, 1, 0)
# Fit the Kaplan-Meier estimator
surv_fit <- long_dat %>%
filter(as.integer(VISCODE) <= 9) %>%
survfit(Surv(as.integer(VISCODE), RAVLT_immediate_cut) ~ thirtile_res, data = .)
# Create the Kaplan-Meier survival plot
plot(surv_fit,
main = "Kaplan-Meier Survival Curve",
xlab = "Time",
ylab = "Survival Probability",
col = c("#021636", "#bbceed", "#0a77f5"),
lwd = 2,
xlim = c(0, 10))
legend("bottomleft",
legend = c("Underachiever", "Average", "Overachiever"),
col = c("#021636", "#bbceed", "#0a77f5"),
lwd = 2)
axis(1, lwd = 1)  # Change x-axis thickness
axis(2, lwd = 1)  # Change y-axis thickness
# Log Rank Test
logrank_test$RAVLT_immediate <- long_dat %>%
filter(thirtile_res != 2) %>%
survdiff(Surv(as.integer(VISCODE), RAVLT_immediate_cut) ~ thirtile_res, data = .)
logrank_test$RAVLT_immediate
# Histogram depicting the number of people measured at each time point by group by outcome
ggplot(long_dat %>% filter(!is.na(RAVLT_immediate_cut)),
aes(x = as.integer(VISCODE), fill = factor(RAVLT_immediate_cut))) +
geom_histogram(position = "identity", alpha = 0.6, binwidth = 2) +
scale_fill_manual(values = c("#bbceed", "#021636"), labels = c("Normal Cognition", "Impaired Cognition")) +
facet_wrap(~ thirtile_res, ncol = 3,
labeller = labeller(thirtile_res = c("1" = "Underperformed",
"2" = "Average",
"3" = "Overperformed"))) +
labs(title = "Number of observations by time by group by outcome",
x = "Time", y = "Number of participants",
fill = "Legend Title") +
theme_minimal() +
theme(axis.line = element_line(size = 0.5),
plot.title = element_text(hjust = 0.5, face = "bold")) +
geom_vline(xintercept = 9, linetype = "dashed", color = "#940914")  # Add  vertical dashed line
cvalue$RAVLT_perc_forgetting <- calculate_cvalue(RAVLT_perc_forgetting)
long_dat$RAVLT_perc_forgetting_cut <- ifelse(long_dat$RAVLT_perc_forgetting > cvalue$RAVLT_perc_forgetting, 1, 0)
# Fit the Kaplan-Meier estimator
surv_fit <- long_dat %>%
filter(as.integer(VISCODE) <= 9) %>%
survfit(Surv(as.integer(VISCODE), RAVLT_perc_forgetting_cut) ~ thirtile_res, data = .)
# Create the Kaplan-Meier survival plot
plot(surv_fit,
main = "Kaplan-Meier Survival Curve",
xlab = "Time",
ylab = "Survival Probability",
col = c("#021636", "#bbceed", "#0a77f5"),
lwd = 2,
xlim = c(0, 10))
legend("bottomleft",
legend = c("Underachiever", "Average", "Overachiever"),
col = c("#021636", "#bbceed", "#0a77f5"),
lwd = 2)
axis(1, lwd = 1)  # Change x-axis thickness
axis(2, lwd = 1)  # Change y-axis thickness
# Log Rank Test
logrank_test$RAVLT_perc_forgetting <- long_dat %>%
filter(thirtile_res != 2) %>%
survdiff(Surv(as.integer(VISCODE), RAVLT_perc_forgetting_cut) ~ thirtile_res, data = .)
logrank_test$RAVLT_perc_forgetting
# Histogram depicting the number of people measured at each time point by group by outcome
ggplot(long_dat %>% filter(!is.na(RAVLT_perc_forgetting_cut)),
aes(x = as.integer(VISCODE), fill = factor(RAVLT_perc_forgetting_cut))) +
geom_histogram(position = "identity", alpha = 0.6, binwidth = 2) +
scale_fill_manual(values = c("#bbceed", "#021636"), labels = c("Normal Cognition", "Impaired Cognition")) +
facet_wrap(~ thirtile_res, ncol = 3,
labeller = labeller(thirtile_res = c("1" = "Underperformed",
"2" = "Average",
"3" = "Overperformed"))) +
labs(title = "Number of observations by time by group by outcome",
x = "Time", y = "Number of participants",
fill = "Legend Title") +
theme_minimal() +
theme(axis.line = element_line(size = 0.5),
plot.title = element_text(hjust = 0.5, face = "bold")) +
geom_vline(xintercept = 9, linetype = "dashed", color = "#940914")  # Add  vertical dashed line
cvalue$RAVLT_forgetting <- calculate_cvalue(RAVLT_forgetting)
long_dat$RAVLT_forgetting_cut <- ifelse(long_dat$RAVLT_forgetting > cvalue$RAVLT_forgetting, 1, 0)
# Fit the Kaplan-Meier estimator
surv_fit <- long_dat %>%
filter(as.integer(VISCODE) <= 9) %>%
survfit(Surv(as.integer(VISCODE), RAVLT_forgetting_cut) ~ thirtile_res, data = .)
# Create the Kaplan-Meier survival plot
plot(surv_fit,
main = "Kaplan-Meier Survival Curve",
xlab = "Time",
ylab = "Survival Probability",
col = c("#021636", "#bbceed", "#0a77f5"),
lwd = 2,
xlim = c(0, 10))
legend("bottomleft",
legend = c("Underachiever", "Average", "Overachiever"),
col = c("#021636", "#bbceed", "#0a77f5"),
lwd = 2)
axis(1, lwd = 1)  # Change x-axis thickness
axis(2, lwd = 1)  # Change y-axis thickness
# Log Rank Test
logrank_test$RAVLT_forgetting <- long_dat %>%
filter(thirtile_res != 2) %>%
survdiff(Surv(as.integer(VISCODE), RAVLT_forgetting_cut) ~ thirtile_res, data = .)
logrank_test$RAVLT_forgetting
# Histogram depicting the number of people measured at each time point by group by outcome
ggplot(long_dat %>% filter(!is.na(RAVLT_forgetting_cut)),
aes(x = as.integer(VISCODE), fill = factor(RAVLT_forgetting_cut))) +
geom_histogram(position = "identity", alpha = 0.6, binwidth = 2) +
scale_fill_manual(values = c("#bbceed", "#021636"), labels = c("Normal Cognition", "Impaired Cognition")) +
facet_wrap(~ thirtile_res, ncol = 3,
labeller = labeller(thirtile_res = c("1" = "Underperformed",
"2" = "Average",
"3" = "Overperformed"))) +
labs(title = "Number of observations by time by group by outcome",
x = "Time", y = "Number of participants",
fill = "Legend Title") +
theme_minimal() +
theme(axis.line = element_line(size = 0.5),
plot.title = element_text(hjust = 0.5, face = "bold")) +
geom_vline(xintercept = 9, linetype = "dashed", color = "#940914")  # Add  vertical dashed line
cvalue$RAVLT_learning <- calculate_cvalue(RAVLT_learning)
long_dat$RAVLT_learning_cut <- ifelse(long_dat$RAVLT_learning > cvalue$RAVLT_learning, 1, 0)
# Fit the Kaplan-Meier estimator
surv_fit <- long_dat %>%
filter(as.integer(VISCODE) <= 9) %>%
survfit(Surv(as.integer(VISCODE), RAVLT_learning_cut) ~ thirtile_res, data = .)
# Create the Kaplan-Meier survival plot
plot(surv_fit,
main = "Kaplan-Meier Survival Curve",
xlab = "Time",
ylab = "Survival Probability",
col = c("#021636", "#bbceed", "#0a77f5"),
lwd = 2,
xlim = c(0, 10))
legend("bottomleft",
legend = c("Underachiever", "Average", "Overachiever"),
col = c("#021636", "#bbceed", "#0a77f5"),
lwd = 2)
axis(1, lwd = 1)  # Change x-axis thickness
axis(2, lwd = 1)  # Change y-axis thickness
# Log Rank Test
logrank_test$RAVLT_learning <- long_dat %>%
filter(thirtile_res != 2) %>%
survdiff(Surv(as.integer(VISCODE), RAVLT_learning_cut) ~ thirtile_res, data = .)
logrank_test$RAVLT_learning
# Histogram depicting the number of people measured at each time point by group by outcome
ggplot(long_dat %>% filter(!is.na(RAVLT_learning_cut)),
aes(x = as.integer(VISCODE), fill = factor(RAVLT_learning_cut))) +
geom_histogram(position = "identity", alpha = 0.6, binwidth = 2) +
scale_fill_manual(values = c("#bbceed", "#021636"), labels = c("Normal Cognition", "Impaired Cognition")) +
facet_wrap(~ thirtile_res, ncol = 3,
labeller = labeller(thirtile_res = c("1" = "Underperformed",
"2" = "Average",
"3" = "Overperformed"))) +
labs(title = "Number of observations by time by group by outcome",
x = "Time", y = "Number of participants",
fill = "Legend Title") +
theme_minimal() +
theme(axis.line = element_line(size = 0.5),
plot.title = element_text(hjust = 0.5, face = "bold")) +
geom_vline(xintercept = 9, linetype = "dashed", color = "#940914")  # Add  vertical dashed line
cvalue$TRABSCOR <- calculate_cvalue(TRABSCOR)
long_dat$TRABSCOR_cut <- ifelse(long_dat$TRABSCOR > cvalue$TRABSCOR, 1, 0)
# Fit the Kaplan-Meier estimator
surv_fit <- long_dat %>%
filter(as.integer(VISCODE) <= 9) %>%
survfit(Surv(as.integer(VISCODE), TRABSCOR_cut) ~ thirtile_res, data = .)
# Create the Kaplan-Meier survival plot
plot(surv_fit,
main = "Kaplan-Meier Survival Curve",
xlab = "Time",
ylab = "Survival Probability",
col = c("#021636", "#bbceed", "#0a77f5"),
lwd = 2,
xlim = c(0, 10))
legend("bottomleft",
legend = c("Underachiever", "Average", "Overachiever"),
col = c("#021636", "#bbceed", "#0a77f5"),
lwd = 2)
axis(1, lwd = 1)  # Change x-axis thickness
axis(2, lwd = 1)  # Change y-axis thickness
# Log Rank Test
logrank_test$TRABSCOR <- long_dat %>%
filter(thirtile_res != 2) %>%
survdiff(Surv(as.integer(VISCODE), TRABSCOR_cut) ~ thirtile_res, data = .)
logrank_test$TRABSCOR
# Histogram depicting the number of people measured at each time point by group by outcome
ggplot(long_dat %>% filter(!is.na(TRABSCOR_cut)),
aes(x = as.integer(VISCODE), fill = factor(TRABSCOR_cut))) +
geom_histogram(position = "identity", alpha = 0.6, binwidth = 2) +
scale_fill_manual(values = c("#bbceed", "#021636"), labels = c("Normal Cognition", "Impaired Cognition")) +
facet_wrap(~ thirtile_res, ncol = 3,
labeller = labeller(thirtile_res = c("1" = "Underperformed",
"2" = "Average",
"3" = "Overperformed"))) +
labs(title = "Number of observations by time by group by outcome",
x = "Time", y = "Number of participants",
fill = "Legend Title") +
theme_minimal() +
theme(axis.line = element_line(size = 0.5),
plot.title = element_text(hjust = 0.5, face = "bold")) +
geom_vline(xintercept = 9, linetype = "dashed", color = "#940914")  # Add  vertical dashed line
